<%inherit file="base.html"/>

<%def name="head()">
<link href="${ROOT_URL}/css/staff.css" rel="stylesheet" type="text/css">
<script type="text/javascript">
$(document).ready(function () {
  <!-- Populate staff-allocation table-->
  $.getJSON("allocation_data/",function(result) {
    var table=document.getElementById("staff");
    var counter=1;
    $.each(result,function(key,value){
       var row=table.insertRow(-1);
       if (counter%2 == 1) { row.id="odd"; }
       else { row.id="even"; }
       counter++;
       row.insertCell(0).innerHTML=value.name;
       row.insertCell(1).innerHTML=(Math.max(0,value.fte - value.buyout
- value.leave)*100)+"%";
       row.insertCell(2).innerHTML=(value.research*100)+"%";
       row.insertCell(3).innerHTML=(value.teaching*100)+"%";
       row.insertCell(4).innerHTML=(value.admin*100)+"%";
       row.insertCell(5).innerHTML=value.notes;
    });
  });

});
</script>

</%def>

<%def name="body()">

<h1>Teaching Allocation</h1>
<center>
<table id="staff-allocation">
  <tr>
    <th>Staff</th>
    <th>Load</th>
    <th>Allocation</th>
  </tr>
</table>
</center>

<center>
<table id="course-allocation">
  <tr>
    <th>Course</th>
    <th>Coverage</th>
    <th>Allocation</th>
  </tr>
</table>
</center>

</%def>

